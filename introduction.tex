\chapter{About this Document\label{intro}}

This document is a supplement to the existing Intel386 System V
Application Binary Interface (ABI) document available at
\url{http://www.sco.com/developers/devspecs/abi386-4.pdf},
which describes the ABI for processors compatible with the
\xARCH Architecture, which supports Intel Pentium instruction set
minus instructions for x87 floating point unit.

This document describes the conventions and constraints on the
implementation of these new features for interoperability between
various tools.

\section{Scope}

This document describes the conventions on the new C/C++ language types
(including alignment and parameter passing conventions), the relocation
symbols in the object binary, and the exception handling mechanism for
\xARCH architecture.  Some of this work has been discussed before
\url{http://groups.google.com/group/ia32-abi} or
\url{http://www.akkadia.org/drepper/tls.pdf}. The C++ object model that
is expected to be followed is described in
\url{http://mentorembedded.github.io/cxx-abi/}.  In particular,
this document specifies the information that compilers have to generate
and the library routines that do the frame unwinding for exception
handling.

\section{Changes from Intel386 System V ABI}

The calling conventions specified in \xARCH System V ABI are
incompatible with Intel386 System V ABI:

\begin{itemize}
  \item There are no x87 floating point registers.
  \item There are no vector registers.
  \item Segment registers are optional.
  \item Support for TLS relocations are optional.
  \item Scalar types larger than 4 bytes are aligned to 4 bytes.
  \item There are no vector types.
  \item \code{_Decimal32}, \code{_Decimal64}, and \code{_Decimal128}
	types are optional.
  \item \code{long double} type is the same as \code{double}.
  \item \code{float}, \code{double} and \code{long double} types are
	passed and returned in general purpose registers.
  \item \code{_Decimal32} and \code{_Decimal64} types are passed
	in general purpose registers.
  \item Aggregate types no larger than 8 bytes are passed and returned
	in general purpose registers.
  \item Stack is 4-byte aligned.
  \item Register \EDX has undefined value at process entry.
\end{itemize}


\section{Related Information}

Links to useful documents:
\begin{itemize}
 \item System V Application Binary Interface, Intel386{\texttrademark} Architecture
       Processor Supplement Fourth Edition:
       \url{http://www.sco.com/developers/devspecs/abi386-4.pdf}
 \item System V Application Binary Interface, AMD64 Architecture Processor
       Supplement, Draft Version 0.99.6:
       \url{http://www.x86-64.org/documentation/abi.pdf}
 \item Discussion of Intel processor extensions:
       \url{http://groups.google.com/group/ia32-abi}
 \item ELF Handling of Thread-Local Storage:
       \url{http://www.akkadia.org/drepper/tls.pdf}
 \item Thread-Local Storage Descriptors for IA32 and AMD64/EM64T:
       \url{http://www.fsfla.org/~lxoliva/writeups/TLS/RFC-TLSDESC-x86.txt}
 \item Itanium C++ ABI, Revised March 20, 2001:
       \url{http://mentorembedded.github.io/cxx-abi/}
\end{itemize}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "abi"
%%% End:
